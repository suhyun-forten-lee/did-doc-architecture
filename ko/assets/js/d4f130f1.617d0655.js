"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7790],{18975:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>r});const s=JSON.parse('{"id":"concepts/wallet_lock_policy_ko","title":"\uc6d4\ub7ab \uc7a0\uae08","description":"- \uc8fc\uc81c : \uc6d4\ub81b \uc7a0\uae08","source":"@site/versioned_docs/version-1.000/concepts/wallet_lock_policy_ko.md","sourceDirName":"concepts","slug":"/concepts/wallet_lock_policy_ko","permalink":"/did-doc-architecture/ko/docs/concepts/wallet_lock_policy_ko","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/versioned_docs/version-1.000/concepts/wallet_lock_policy_ko.md","tags":[],"version":"1.000","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Wallet Lock","permalink":"/did-doc-architecture/ko/docs/concepts/wallet_lock_policy"},"next":{"title":"Wallet Policy","permalink":"/did-doc-architecture/ko/docs/concepts/wallet_policy"}}');var c=n(74848),l=n(28453);const a={},i="\uc6d4\ub7ab \uc7a0\uae08",d={},r=[{value:"1. \uc6d4\ub7ab \uc7a0\uae08 (PIN)",id:"1-\uc6d4\ub7ab-\uc7a0\uae08-pin",level:3},{value:"\uc608\uc81c",id:"\uc608\uc81c",level:3},{value:"2. \uc6d4\ub7ab \uc7a0\uae08\ud574\uc81c (PIN)",id:"2-\uc6d4\ub7ab-\uc7a0\uae08\ud574\uc81c-pin",level:3},{value:"\uc608\uc81c",id:"\uc608\uc81c-1",level:3},{value:"3. \uc6d4\ub7ab PIN \ubcc0\uacbd (TO-DO)",id:"3-\uc6d4\ub7ab-pin-\ubcc0\uacbd-to-do",level:3}];function o(e){const t={br:"br",code:"code",h1:"h1",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t.header,{children:(0,c.jsx)(t.h1,{id:"\uc6d4\ub7ab-\uc7a0\uae08",children:"\uc6d4\ub7ab \uc7a0\uae08"})}),"\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsx)(t.li,{children:"\uc8fc\uc81c : \uc6d4\ub81b \uc7a0\uae08"}),"\n",(0,c.jsx)(t.li,{children:"\uc791\uc131 : \uc624\ud508\uc18c\uc2a4\uac1c\ubc1c\ud300"}),"\n",(0,c.jsx)(t.li,{children:"\uc77c\uc790 : 2024-10-18"}),"\n",(0,c.jsx)(t.li,{children:"\ubc84\uc804 : v1.0.0"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,c.jsxs)(t.table,{children:[(0,c.jsx)(t.thead,{children:(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.th,{children:"\ubc84\uc804"}),(0,c.jsx)(t.th,{children:"\uc77c\uc790"}),(0,c.jsx)(t.th,{children:"\ubcc0\uacbd"})]})}),(0,c.jsx)(t.tbody,{children:(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:"v1.0.0"}),(0,c.jsx)(t.td,{children:"2024-10-18"}),(0,c.jsx)(t.td,{children:"\ucd5c\ucd08 \uc791\uc131"})]})})]}),"\n",(0,c.jsx)(t.br,{}),"\n",(0,c.jsxs)(t.p,{children:["\uc778\uac00\uc571(CA)\uc73c\ub85c \ubd80\ud130 \ubc1b\uc740 passcode \uae30\ubc18\uc73c\ub85c cek(content encrypt key)\ub97c \uc0dd\uc131,\ubcc0\uacbd, \uc870\ud68c\ud558\ub294 \uc5ed\ud560\uc744 \ud55c\ub2e4.\n",(0,c.jsx)(t.br,{}),"\ncek\ub294 \uc11c\ube44\uc2a4 \uc6d4\ub7ab\uc5d0\uc11c \uad00\ub9ac\ud558\uba70 \uc6d4\ub7ab lock/ unlock\uc2dc \uc0ac\uc6a9\ub41c\ub2e4.\n\uc778\uac00\uc571\uc5d0\uc11c passcode \uc785\ub825 \ud654\uba74\uc744 \uad6c\ud604\ud558\uace0 passcode\ub294 \ub4f1\ub85d, \ubcc0\uacbd\uc2dc \uc778\uac00\uc571\uc5d0\uc11c \ub9e4\uce6d\uc2dc\ud0a8\ub2e4."]}),"\n",(0,c.jsx)(t.p,{children:"\uc7a0\uae08 \ud615\ud0dc\uc758 \uc6d4\ub7ab\uacfc \uc7a0\uae08\ud615\ud0dc\uac00 \uc544\ub2cc \uc6d4\ub7ab\uc758 \ubc29\uc2dd\uc740 \uc544\ub798\uc640 \uac19\uc774 \uc0ac\uc6a9\uc790 \uc778\uc99d \uc720\ubb34\uc5d0 \ub530\ub77c \ub3d9\uc791\ud55c\ub2e4."}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.img,{alt:"\uc774\ubbf8\uc9c0 \uc124\uba85",src:n(65566).A+"",width:"1149",height:"287"})}),"\n",(0,c.jsx)(t.p,{children:"\uc7a0\uae08 \ud615\ud0dc\uc758 \uc9c0\uac11\uc744 \uc124\uc815\ud558\uae30 \uc704\ud574\uc11c \uc0ac\uc6a9\uc790\uc758 \ud328\uc2a4\ucf54\ub4dc \ub4f1\ub85d\uacfc \uc778\uc99d\uc5d0 \ub300\ud55c \uae30\uc220\uc801 \ub85c\uc9c1\uc744 \uc544\ub798\uc5d0\uc11c \uc124\uba85\ud55c\ub2e4."}),"\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsxs)(t.li,{children:["\uc6a9\uc5b4\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsx)(t.li,{children:"cek = content encrpytion key"}),"\n",(0,c.jsx)(t.li,{children:"kek = key encryption key"}),"\n",(0,c.jsx)(t.li,{children:"pbkdf = password-based key derivation function"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(t.h3,{id:"1-\uc6d4\ub7ab-\uc7a0\uae08-pin",children:"1. \uc6d4\ub7ab \uc7a0\uae08 (PIN)"}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.img,{alt:"\uc774\ubbf8\uc9c0 \uc124\uba85",src:n(34764).A+"",width:"1035",height:"171"})}),"\n",(0,c.jsx)(t.h3,{id:"\uc608\uc81c",children:"\uc608\uc81c"}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-code",children:'let sacObject = SecAccessControlCreateWithFlags(kCFAllocatorDefault\n                                                , kSecAttrAccessibleWhenUnlockedThisDeviceOnly\n                                                , []\n                                                , &errorRef)\n        \nlet queryForDelete: [CFString: Any] = [kSecClass: kSecClassGenericPassword, kSecAttrService: "KEY_PIN_CHAIN_DATA"]\n        \nvar status = SecItemDelete(queryForDelete as CFDictionary)\nWalletLogger.shared.debug("item delete status: \\(status)")\n\nvar cek: NSMutableData\nif self.seedKey == nil {\n    cek = NSMutableData(length: 32)!\n    _ = SecRandomCopyBytes(kSecRandomDefault, 32, cek.mutableBytes)\n}  else {\n    cek = NSMutableData(data: self.seedKey!)\n}\n\nlet salt = try MultibaseUtils.decode(encoded: "f6c646576656c6f7065726c3139383540676d61696c2e636f6d")\n \nlet kek = try CryptoUtils.pbkdf2(password: passcode.data(using: .utf8)!, salt: salt, iterations: 2048, derivedKeyLength: 32)\n\nWalletLogger.shared.debug("======[H] kek: \\(MultibaseUtils.encode(type: MultibaseType.base16, data: kek))")\n        \nlet iv = try MultibaseUtils.decode(encoded: "z75M7MfQsC4p2rTxeKxYh2M")\n        \nlet encCek = try CryptoUtils.encrypt(plain: cek as Data, info: CipherInfo(cipherType: SymmetricCipherType.aes256CBC, padding: SymmetricPaddingType.pkcs5), key: kek, iv: iv)\n\nWalletLogger.shared.debug("======[H] encCek: \\(MultibaseUtils.encode(type: MultibaseType.base16, data: encCek))")\n        \nlet finalEncCek = try SecureEncryptor.encrypt(plainData: encCek as Data)\n'})}),"\n",(0,c.jsx)(t.br,{}),"\n",(0,c.jsx)(t.h3,{id:"2-\uc6d4\ub7ab-\uc7a0\uae08\ud574\uc81c-pin",children:"2. \uc6d4\ub7ab \uc7a0\uae08\ud574\uc81c (PIN)"}),"\n",(0,c.jsxs)(t.p,{children:[(0,c.jsx)(t.img,{alt:"\uc774\ubbf8\uc9c0 \uc124\uba85",src:n(96339).A+"",width:"1035",height:"164"}),"\n",(0,c.jsx)(t.br,{})]}),"\n",(0,c.jsx)(t.h3,{id:"\uc608\uc81c-1",children:"\uc608\uc81c"}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-code",children:'let finalEncCek = try MultibaseUtils.decode(encoded: CoreDataManager.shared.selectUser()!.finalEncKey)\n\nWalletLogger.shared.debug("======[H] finalEncCek: \\(MultibaseUtils.encode(type: MultibaseType.base16, data: finalEncCek))")\n\nlet encCek = try SecureEncryptor.decrypt(cipherData: finalEncCek)\nWalletLogger.shared.debug("======[H] encCek: \\(MultibaseUtils.encode(type: MultibaseType.base16, data: encCek))")\n\nlet salt = try MultibaseUtils.decode(encoded: "f6c646576656c6f7065726c3139383540676d61696c2e636f6d")\nlet kek = try CryptoUtils.pbkdf2(password: passcode.data(using: .utf8)!, salt: salt, iterations: 2048, derivedKeyLength: 32)\n\nWalletLogger.shared.debug("======[H] kek: \\(MultibaseUtils.encode(type: MultibaseType.base16, data: kek))")\n\nlet iv = try MultibaseUtils.decode(encoded: "z75M7MfQsC4p2rTxeKxYh2M")\nlet decCek = try CryptoUtils.decrypt(cipher: encCek, info: CipherInfo(cipherType: SymmetricCipherType.aes256CBC, padding: SymmetricPaddingType.pkcs5), key: kek, iv: iv)\n\nWalletLogger.shared.debug("======[H] decCek: \\(MultibaseUtils.encode(type: MultibaseType.base16, data: decCek))")\n\n\nvar dataTypeRef: CFTypeRef?\n\nlet query: [CFString: Any] = [\n    kSecClass: kSecClassGenericPassword,\n    kSecAttrService: "KEY_PIN_CHAIN_DATA",\n    kSecReturnData: true\n]\n\nlet status = SecItemCopyMatching(query as CFDictionary, &dataTypeRef)\nWalletLogger.shared.debug("item matching status : \\(status)")\n\n\nlet cek = dataTypeRef as! Data\nWalletLogger.shared.debug("======[H] load cek: \\(MultibaseUtils.encode(type: MultibaseType.base16, data: cek))")\n\nif cek as Data == decCek {\n    return cek as Data\n}\n'})}),"\n",(0,c.jsx)(t.h3,{id:"3-\uc6d4\ub7ab-pin-\ubcc0\uacbd-to-do",children:"3. \uc6d4\ub7ab PIN \ubcc0\uacbd (TO-DO)"}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.img,{alt:"\uc774\ubbf8\uc9c0 \uc124\uba85",src:n(34382).A+"",width:"1035",height:"170"})})]})}function p(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,c.jsx)(t,{...e,children:(0,c.jsx)(o,{...e})}):o(e)}},34764:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/wallet_lock_policy_pin_lock_ko-4532fabced235dcc315fe185546e8089.svg"},96339:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/wallet_lock_policy_pin_unlock_ko-d9e62a93540775a1634053716cef87ce.svg"},34382:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/wallet_lock_policy_pin_update_ko-eba223621b79d4d2a75f5e6df7a97821.svg"},65566:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/wallet_type_access_sdk_ko-d5dc867de30b88b7016351e22f914627.svg"},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>i});var s=n(96540);const c={},l=s.createContext(c);function a(e){const t=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:a(e.components),s.createElement(l.Provider,{value:t},e.children)}}}]);